var app;!function(){"use strict";app=angular.module("pcesports",["ngResource","initialValue"])}(),app.factory("notification",function(){"use strict";return{error:function(a){return a.data.message},form:function(a){var b="";return angular.forEach(a.data,function(a,c){"status"!=c&&(b+=a+"\n")}),b}}}),app.factory("query",["$resource",function(a){return a(g.site,{},{save:{method:"POST",params:{}}})}]);var initialValueModule=angular.module("initialValue",[]).directive("initialValue",function(){var a=function(a){var b="";if(a&&"string"==typeof a){var c=a.split("\n");c.forEach(function(a){b+=a.trim()+"\n"})}return b};return{restrict:"A",controller:["$scope","$element","$attrs","$parse",function(b,c,d,e){var f,g,h,i,j;if(i=c[0].tagName.toLowerCase(),h=d.initialValue||a(c.val()),"input"===i)"checkbox"===c.attr("type")?h=c[0].checked:"radio"===c.attr("type")?h=c[0].checked||void 0!==c.attr("selected")?c.val():void 0:"number"===c.attr("type")?h=void 0!==c.val()?parseFloat(c.val()):void 0:"color"===c.attr("type")||"range"===c.attr("type")?h=c[0].getAttribute("value"):"date"===c.attr("type")&&(h=new Date(h.trim()));else if("select"===i){j=[];for(var k=0;k<c[0].options.length;k++){var l=c[0].options[k];l.hasAttribute("selected")&&c[0].hasAttribute("multiple")?j.push(l.text):h=l.text}}d.ngModel&&(h||void 0!==j&&j.length)&&(f=e(d.ngModel),(g=f.assign)(b,void 0!==j&&j.length?j:h))}]}});"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports=initialValueModule),app.controller("Login",["$scope","query","notification",function(a,b,c){a.errorLogin="",a.errorRegistration="",a.successRegistration="",a.buttonLogin="",a.buttonRegistration="",a.login=function(){return!(a.buttonLogin||!a.emailLogin||!a.passwordLogin)&&(a.errorLogin="",a.buttonLogin="alpha",void b.save({ajax:"login",email:a.emailLogin,password:a.passwordLogin},function(a){location.reload()},function(b){a.buttonLogin="",a.errorLogin=c.form(b)}))},a.register=function(){return!(a.buttonRegistration||!a.emailRegistration||!a.passwordRegistration)&&(a.errorRegistration="",a.buttonRegistration="alpha",void b.save({ajax:"register",email:a.emailRegistration,password:a.passwordRegistration,captcha:jQuery("#g-recaptcha-response").val()},function(b){a.emailRegistration="",a.passwordRegistration="",a.buttonRegistration="",a.successRegistration=b.message},function(b){a.buttonRegistration="",a.errorRegistration=c.form(b),grecaptcha.reset()}))},a.restore=function(){return!(a.buttonRestore||!a.emailRestore)&&(a.errorRestore="",a.buttonRestore="alpha",void b.save({ajax:"restorePassword",email:a.emailRestore},function(b){a.emailRestore="",a.passwordRestore="",a.buttonRestore="",a.successRestore=b.message},function(b){a.buttonRestore="",a.errorRestore=c.form(b)}))},a.showRegistration=function(){jQuery('#login-window .form[name="loginForm"]').slideUp("fast"),jQuery('#login-window .form[name="registrationForm"]').slideDown("fast")},a.showRestore=function(){jQuery('#login-window .form[name="loginForm"]').slideUp("fast"),jQuery('#login-window .form[name="restoreForm"]').slideDown("fast")},a.backStep=function(){jQuery('#login-window .form[name="loginForm"]').slideDown("fast"),jQuery('#login-window .form[name="registrationForm"]').slideUp("fast"),jQuery('#login-window .form[name="restoreForm"]').slideUp("fast")}}]),app.controller("Restore",["$scope","query","notification",function(a,b,c){a.error="",a.restore=function(){return!!(!a.button&&a.code&&a.email&&a.password&&a.passwordRepeat)&&(a.form.repeat_password.$setValidity("match",!0),a.password!=a.passwordRepeat&&a.form.repeat_password.$setValidity("match",!1),a.error="",a.button="alpha",void b.save({ajax:"restorePasswordCode",email:a.email,code:a.code,password:a.password,passwordRepeat:a.passwordRepeat,captcha:jQuery("#g-recaptcha-response").val()},function(a){window.location.href=a.url},function(b){a.button="",a.error=c.form(b),grecaptcha.reset()}))}}]);